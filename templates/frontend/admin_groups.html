{% extends 'frontend/base_dashboard.html' %}
{% load static %}

{% block title %}Manage Groups - Admin{% endblock %}

{% block main_content %}
<div class="page-content">
    <div class="page-header">
        <div class="header-content">
            <div>
                <h1>Manage Groups</h1>
                <p>View and manage all network groups</p>
            </div>
        </div>
    </div>
    
    <!-- Groups Table -->
    <div class="admin-section">
        <div class="admin-section-header">
            <h2 class="admin-section-title">
                <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                </svg>
                All Groups ({{ groups.count }})
            </h2>
        </div>
        
        <div style="overflow-x: auto;">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>Group Type</th>
                        <th>NID</th>
                        <th>Radius</th>
                        <th>Owners</th>
                        <th>Devices</th>
                        <th>Description</th>
                        <th>Created</th>
                    </tr>
                </thead>
                <tbody>
                    {% for group in groups %}
                    <tr>
                        <td>
                            <span class="badge badge-info" style="font-size: 0.875rem; padding: 0.5rem 1rem;">{{ group.get_group_type_display }}</span>
                        </td>
                        <td style="font-family: monospace; font-size: 0.875rem;">
                            {{ group.nid|default:"—" }}
                        </td>
                        <td>
                            {% if group.radius %}
                            <span>{{ group.radius }} km</span>
                            {% else %}
                            <span>—</span>
                            {% endif %}
                        </td>
                        <td>
                            <span style="font-weight: 500;">{{ group.owner_count }}</span>
                        </td>
                        <td>
                            <span style="font-weight: 500;">{{ group.device_count }}</span>
                        </td>
                        <td style="font-size: 0.875rem; color: #6b7280; max-width: 300px;">
                            {{ group.description|default:"—"|truncatewords:15 }}
                        </td>
                        <td style="font-size: 0.75rem; color: #6b7280;">
                            {{ group.created_at|date:"M d, Y" }}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7" style="text-align: center; color: #6b7280; padding: 2rem;">No groups found</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Group Type Information -->
    <div class="admin-section">
        <div class="admin-section-header">
            <h2 class="admin-section-title">
                <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Group Type Reference
            </h2>
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
            <div style="padding: 1rem; background: #f9fafb; border-radius: 8px;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">Private</div>
                <div style="font-size: 0.875rem; color: #6b7280;">Uses NID, no distance. Multiple devices allowed.</div>
            </div>
            <div style="padding: 1rem; background: #f9fafb; border-radius: 8px;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">Exclusive</div>
                <div style="font-size: 0.875rem; color: #6b7280;">Uses NID, no distance. Only 1 device allowed.</div>
            </div>
            <div style="padding: 1rem; background: #f9fafb; border-radius: 8px;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">Open</div>
                <div style="font-size: 0.875rem; color: #6b7280;">Uses distance only. Only 1 device allowed.</div>
            </div>
            <div style="padding: 1rem; background: #f9fafb; border-radius: 8px;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">Data Logger</div>
                <div style="font-size: 0.875rem; color: #6b7280;">Uses NID, no distance. Multiple devices allowed.</div>
            </div>
            <div style="padding: 1rem; background: #f9fafb; border-radius: 8px;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">Enhanced</div>
                <div style="font-size: 0.875rem; color: #6b7280;">Uses NID and distance. Only 1 device allowed.</div>
            </div>
            <div style="padding: 1rem; background: #f9fafb; border-radius: 8px;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">Location</div>
                <div style="font-size: 0.875rem; color: #6b7280;">Uses NID (0xFFFFFFFF) and distance. Only 1 device allowed.</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

